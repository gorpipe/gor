

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>WRITE &mdash; GOR Open Source v.2.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/gorpipe.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <nav class="wy-master-nav">
    <div class="gor-logo-home">
        <a href="../index.html">
            <img src="../_static/GORLogoText.svg" class="logo" />
        </a>
    </div>
    <div role="search" class="wxnc-search-form">
        <button class="wxnc-search-button" form="wxnc-search-form" formmethod="get">
            <i class="fa fa-search" aria-hidden="true"> </i>
        </button>
        <form id="wxnc-search-form" class="wy-form" action="../search.html" method="get">
            <input class="wxnc-no-right-border" size="30" type="text" name="q" placeholder="Search the user manual..."/>
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
    </div>
</nav>

  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            
            
              <div class="version">
                <a href="../index.html">
                  GOR Open Source
                  <p class="wxnc-subtitle">Documentation</p>
                </a>
              </div>
            
          

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">Functions</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">GOR Open Source</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>WRITE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span style="float:right; padding-top:10px; color:#BABABA;">Used in: gor/nor</span><div class="section" id="write">
<span id="id1"></span><h1>WRITE<a class="headerlink" href="#write" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="#write"><span class="std std-ref">WRITE</span></a> command can be used to write a stream into one or more files simultaneously.</p>
<p>By specifying a “fork” column, with the <code class="docutils literal notranslate"><span class="pre">-f</span></code> option, the stream can be forked, i.e. written into multiple files.  In this case, #{fork} has to appear in the filename template. If you specify the <code class="docutils literal notranslate"><span class="pre">-f</span></code> option, you must also specify the column that is used to fork the output files.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-d</span></code> option can be used to write the fork files to directories instead of spliting filenames with #{fork}.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-r</span></code> option can be used to eliminate the fork column from the output, since it is already represented in the filenames.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-c</span></code> tells the command to use column store compression for the output.</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-gor notranslate"><div class="highlight"><pre><span></span><span class="nd">gor</span> ... | write &lt;file name&gt; [-<span class="no">f</span> forkCol] [-d] [-r] [-c] [-m] [-i type]
</pre></div>
</div>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">&lt;column&gt;</span></code></p></td>
<td><p>The “fork column” used to split the output into multiple files.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-d</span></code></p></td>
<td><p>Use subdirectories instead of #{fork} in filename for forkwrite.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-r</span></code></p></td>
<td><p>Eliminate the fork column from the output.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-c</span></code></p></td>
<td><p>Use column store compression for the output.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-m</span></code></p></td>
<td><p>Create MD5 sum file along with the output file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-maxseg</span></code></p></td>
<td><p>Write maxseg to the gor meta file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-inferschema</span></code></p></td>
<td><p>Write schema to the gor meta file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">&lt;type&gt;</span></code></p></td>
<td><p>Write index file (.gori) with a .gorz file, (.tbi) with .vcf.gz
Must state the type, which can be FULL, CHROM or TABIX</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-l</span> <span class="pre">&lt;level&gt;</span></code></p></td>
<td><p>Compression level (0-9). Default 1.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">'&lt;tags&gt;'</span></code></p></td>
<td><p>List of tags which write ensures a file will be created.
Only valid with the -f option.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-tags</span> <span class="pre">'&lt;tags&gt;'</span></code></p></td>
<td><p>List of tags/alias to use in the resulting dictionary when
writing the files to directories.   Usually used with partgor
as <code class="docutils literal notranslate"><span class="pre">-tags</span> <span class="pre">#{tags}</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-prefix</span> <span class="pre">&lt;hf&gt;</span></code></p></td>
<td><p>Takes in a text source containing prefix to be prepended to the
file written. Also support string in single quotes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-noheader</span></code></p></td>
<td><p>Don’t write a header lines.  Not valid with gor/gorz/nor/norz.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-card</span> <span class="pre">'&lt;cols&gt;'</span></code></p></td>
<td><p>Calculate cardinality of columns in ‘&lt;cols&gt;’ and adds to the
outputs meta data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-link</span> <span class="pre">&lt;link&gt;</span></code></p></td>
<td><p>Writes a link file pointing to the the &lt;file name&gt;.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-vlink</span> <span class="pre">&lt;link&gt;</span></code></p></td>
<td><p>Writes a versioned link file pointing to the the &lt;file name&gt;.
The &lt;file name&gt; should not be overwritten if it has previously
been used in a link file.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-gor notranslate"><div class="highlight"><pre><span></span><span class="nd">gor</span> -<span class="no">p</span> chr1:10020-10051 fileA.gor | write fileB.gorz
</pre></div>
</div>
<p>The query above will read the first four rows of the example file shown above and write them to a compressed GOR file in the same directory.</p>
<div class="highlight-gor notranslate"><div class="highlight"><pre><span></span><span class="nd">gor</span> multiPIDfile.gor | write data_#{fork}.gor -<span class="no">f</span> <span class="na">PID</span> -r
</pre></div>
</div>
<p>The query above will write the contents of multiPIDfile.gor into as many files as there are distinct PIDs in the file. In this example, the output files from the WRITE command will be named data_101.gor and data_102.gor and the <code class="docutils literal notranslate"><span class="pre">-r</span></code> flag removes the PID column (i.e. the column used to fork the data).</p>
<div class="highlight-gor notranslate"><div class="highlight"><pre><span></span><span class="nd">gor</span> multiPIDfile.gor | write data_#{fork}.gor -<span class="no">f</span> <span class="na">PID</span> -r -t &#39;PN001,PN002,PN003&#39;
</pre></div>
</div>
<p>The query above will write the contents of multiPIDfile.gor into as many files as there are distinct PIDs in the file. In this example a list of PIDs is supplied and the write command will create an empty file for each of the tags listed.</p>
<div class="highlight-gor notranslate"><div class="highlight"><pre><span></span><span class="nd">gor</span> fileA.gor | write s3data://project/user_data/fileB.gorz.
</pre></div>
</div>
<p>The query above will write the contents of <code class="docutils literal notranslate"><span class="pre">fileA.gor</span></code> into S3 project folder.  In addition it will create a link to the S3 file in the project folder under <code class="docutils literal notranslate"><span class="pre">user_data/fileB.gorz.link</span></code>.</p>
<p>There are 4 different S3 project and shared folders that can be written to:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 40%" />
<col style="width: 48%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Project</p></td>
<td><p>s3data://project/&lt;path to data&gt;</p></td>
<td><p>Current project S3 folder.</p></td>
</tr>
<tr class="row-even"><td><p>Shared</p></td>
<td><p>s3data://shared/&lt;path to data&gt;</p></td>
<td><p>S3 folder shared between all projects.</p></td>
</tr>
<tr class="row-odd"><td><p>Region</p></td>
<td><p>s3region://shared/&lt;path to data&gt;</p></td>
<td><p>S3 region shared folder.</p></td>
</tr>
<tr class="row-even"><td><p>Global</p></td>
<td><p>s3global://shared/&lt;path to data&gt;</p></td>
<td><p>S3 global shared folder.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020 GOR Open Source Project

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>